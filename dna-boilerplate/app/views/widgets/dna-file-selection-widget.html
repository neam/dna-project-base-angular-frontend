<!-- Preview for currently saved image -->
<!--
<pre>{{ file | json }}</pre>
-->
<div ng-if="files.length > 0" class="preview" ng-class="{multiple: multiple}">
    <ul>
        <li ng-repeat="file in files">
            <p><a href="{{ file.absolute_url }}" target="_blank"><strong ng-show="file.attributes.filename">{{
                file.attributes.filename }}</strong><strong ng-show="!file.attributes.filename">Existing
                file</strong></a><span ng-if="file.attributes.size"> (Size {{ file.attributes.size | filesize }})</span>,
                uploaded {{ file.attributes.created }}</p>
            <ul>
                <li ng-repeat="fileInstance in file.fileInstances">{{ fileInstance.filename }}</li>
            </ul>
            <div class="preview-container">
                <div filepicker-preview ng-if="previewUrl" url="previewUrl"
                     style="height:{{previewHeightPixels}}px"></div>
            </div>
        </li>
    </ul>
</div>
<div ng-if="!file.id">
    (No file<span ng-show="multiple">s</span> selected)
</div>

<!-- Button to replace empty/saved image with newly uploaded image -->
<div class="pick-files">
    <input ng-if="!multiple" filepicker type="filepicker-dragdrop"
           data-fp-mimetypes="*/*" data-fp-container="modal" data-fp-multiple="false"
           data-fp-services="COMPUTER,DROPBOX,GOOGLE_DRIVE,GMAIL,BOX,IMAGE_SEARCH,URL,CONVERT"
           on-success="onSuccess(event)">
    <input ng-if="multiple" filepicker type="filepicker-dragdrop"
           data-fp-mimetypes="*/*" data-fp-container="modal" data-fp-multiple="true"
           data-fp-services="COMPUTER,DROPBOX,GOOGLE_DRIVE,GMAIL,BOX,IMAGE_SEARCH,URL,CONVERT"
           on-success="onSuccess(event)">
</div>

<!-- The actual input to hold the id of the chosen file -->
<input ng-if="!multiple" type="hidden" ng-model="ngModel"/>
<select ng-if="multiple" ng-model="ngModel" multiple="multiple" style="display:none;"></select>
<!--
<div class="select2 m-b">
    <select2 ng-model="ngModel" options="crud.relations.thumbnailMedia.select2Options" empty-to-null>
        <option value="{{ngModel}}">{{label}}
        </option>
    </select2>
</div>
-->

<!--
<ul>
    <li ng-repeat="file in files">{{file}}</li>
</ul>
<pre>
{{ files | json }}
</pre>
-->

<!-- <ul style="margin:0; padding:0;" ng-show="false">
<li><span>img.png</span> <span><a href="#">[View]</a></span> <span><a href="#">[Change]</a></span>
</li>
<br/>
<button class="btn btn-sm btn-primary">Add new file</button>
<button class="btn btn-sm btn-primary">Manage files</button>
</ul> -->
